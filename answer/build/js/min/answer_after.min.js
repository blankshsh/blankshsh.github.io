$(document).ready(function(){localStorage.user?($("#endscore").show(),$("#endscore h3 span").text(localStorage.user),localStorage.score?$("#endscore h4 span").text("您一共答对了"+localStorage.score+"道题目"):$("#endscore h4 span").text("暂未查询到你的分数")):$("#userin").show(),$("#goform").click(function(){var e=$("#userin input").val();""==e?alert("请输入名字"):($("#form").show(),$("#userin").hide()),localStorage.user=e}),$("#answer_radio").delegate(".item .choices li input","click",function(){$(this).parent("li").siblings().removeClass("cur"),$(this).parent("li").addClass("cur")}),$("#answer_judgment").delegate(".item .choices li input","click",function(){$(this).parent("li").siblings().removeClass("cur"),$(this).parent("li").addClass("cur")}),$("#answer_checkbox").delegate(".item .choices_check li input","click",function(){$(this).parent("li").hasClass("cur")?$(this).parent("li").removeClass("cur"):$(this).parent("li").addClass("cur")}),$("#answer_radio .item li,#answer_judgment .item li").on("click",function(){if(0==$(this).parents(".item").nextAll().length){var e=$(this).parents("ul").next().offset().top;$("body,html").animate({scrollTop:e-100+"px"})}else{var e=$(this).parents(".item").next().offset().top;$("body,html").animate({scrollTop:e-100+"px"})}}),$("#submit").click(function(e){e.preventDefault();var a=0,t=0;$("#answer_radio .item").each(function(){for(var e=a,t=$(this).find("input"),s=0,o=3;s<o;s++)t[s].checked&&($(t[s]).addClass("cur"),1==t[s].value&&(a+=1));e==a&&$(this).addClass("wrongbox")}),console.log(a),$("#answer_judgment .item").each(function(){for(var e=$(this).find("input"),a=t,s=0,o=2;s<o;s++)e[s].checked&&($(e[s]).addClass("cur"),1==e[s].value&&(t+=1));a==t&&$(this).addClass("wrongbox")}),console.log(t);var s=0;$("#answer_checkbox .item").each(function(){for(var e=0,a=[],t=0,o=s,r=$(this).find("input"),n=0,l=4,i=0;i<l;i++)r[i].checked&&(e++,a.push(r[i].value),$(r[i]).addClass("cur")),1==r[i].value&&t++;e==t&&(n=a.indexOf(0)==-1?1:0),1==n&&(s+=1),o==s&&$(this).addClass("wrongbox")}),console.log(s);var o=a+t+s;localStorage.score=o,$("input").each(function(){1==$(this).val()&&$(this).parent().addClass("right")}),$(".wrp").addClass("answer_after"),$("input").attr("disabled",!0),$("#endscore").show(),localStorage.user&&$("#endscore h3 span").text(localStorage.user),localStorage.score?$("#endscore h4 span").text("您一共答对了"+localStorage.score+"道题目"):$("#endscore h4 span").text("暂未查询到你的分数"),$("body,html").animate({scrollTop:0}),$("#submit").hide(),$("#newanswer_after").show()}),$("#newanswer,#newanswer_after").click(function(){localStorage.user&&localStorage.removeItem("user"),localStorage.score&&localStorage.removeItem("score"),window.location.reload()})});